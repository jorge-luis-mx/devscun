window.addEventListener("DOMContentLoaded",e=>{let t=window.location,o=t.pathname.split("/")[1],n=t.protocol+"//"+t.host+"/"+o;const r=document.getElementById("btn-menu");var s=document.querySelector(".icon-amburger"),c=document.querySelector(".icon-close");s.style.display="block",c.style.display="none",null!=r&&r.addEventListener("click",e=>{y.showMenu(e)});const l=document.getElementById("submitContact");null!=l&&l.addEventListener("click",e=>{y.contactSubmit(n,e)});const a=document.querySelectorAll(".form-control");a&&a.forEach(e=>{e.addEventListener("keypress",e=>{y.removeError(e.target)})});const i=document.querySelectorAll(".justnumeric");null!=i&&i.forEach(e=>{e.addEventListener("keypress",e=>{y.justNumeric(e)})});const u=/^[a-zA-ZÀ-ÿ\s]{1,40}$/,d=/^\d{7,14}$/,m=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,y={showMenu:function(e){var t,o=document.querySelector(".icon-amburger"),n=document.querySelector(".icon-close");"none"!==o.style.display?(o.style.display="none",n.style.display="block",(t=document.querySelector(".menu-link")).classList.add("mostrarMenuMovil"),t.classList.remove("quitarMenuMovil")):(o.style.display="block",n.style.display="none",(t=document.querySelector(".menu-link")).classList.add("quitarMenuMovil"),t.classList.remove("mostrarMenuMovil"))},validarFormulario:function(e){switch(e.target.name){case"nombre":this.ruleinputs(u,e.target,e.target.name);break;case"telefono":this.ruleinputs(d,e.target,e.target.name);break;case"correo":this.ruleinputs(m,e.target,e.target.name);break;case"pais":case"estado":case"ciudad":case"asunto":case"mensaje":this.ruleinputs(u,e.target,e.target.name)}},ruleinputs:function(e,t,o){e.test(t.value)?document.getElementById(o).classList.remove("danger-input"):(document.getElementById(o).classList.add("danger-input"),document.getElementById(o).focus())},contactSubmit:async function(e,t){t.preventDefault();const o=document.getElementById("contactoForm"),n=new FormData(o),r=["asunto","mensaje","nombre","empresa","correo","telefono"],s=["empresa"],c={};for(const e of r){let t=n.get(e);c[e]=t?t.trim():""}const l=/^[\w.-]+@[a-zA-Z\d.-]+\.[a-zA-Z]{2,}$/,a=/^\d{10,15}$/;for(const[e,t]of Object.entries(c)){if(!s.includes(e)&&!t.length)return this.errorActive(e,"Este campo es obligatorio"),!1;if("correo"===e&&t.length&&!l.test(t))return this.errorActive("correo","Por favor, ingresa un correo válido"),!1;if("telefono"===e&&t.length&&!a.test(t))return this.errorActive("telefono","El teléfono debe tener entre 10 y 15 dígitos"),!1}try{const e=await fetch("controllers/EmailController.php",{method:"post",body:n});200==(await e.json()).status&&(Swal.fire({title:"Mensaje enviado correctamente!",text:"Click en el botón!",icon:"success",confirmButtonText:"OK",confirmButtonColor:"#3085d6"}),o.reset())}catch(t){console.log("fetch failed",t)}},errorActive:function(e,t){const o=document.getElementById(`${e}`),n=o.closest(".input-group").querySelector(".error-message");null!=n&&(n.textContent=t,n.style.display="block",o.focus())},removeError:function(e){const t=e.closest(".input-group").querySelector(".error-message");t&&(t.style.display="none")},justNumeric:function(e){}};document.querySelectorAll(".grid figure, .gridFooter figure").forEach(e=>{e.addEventListener("mouseover",()=>{e.style.backgroundPosition="right bottom"}),e.addEventListener("mouseout",()=>{e.style.backgroundPosition="left top"}),e.addEventListener("click",()=>{const t=e.getAttribute("vinculo");t&&(window.location.href=t)})})});