window.addEventListener("DOMContentLoaded",t=>{let e=window.location,a=e.pathname.split("/")[1],n=e.protocol+"//"+e.host+"/"+a;const o=document.getElementById("btn-menu");null!=o&&o.addEventListener("click",t=>{m.showMenu(t)});const r=document.getElementById("submitContact");null!=r&&r.addEventListener("click",t=>{m.contactSubmit(n,t)});const s=document.querySelectorAll(".iam-input");null!=s&&s.forEach(t=>{t.addEventListener("keypress",t=>{m.removeError(t)})});const i=document.querySelectorAll(".justnumeric");null!=i&&i.forEach(t=>{t.addEventListener("keypress",t=>{m.justNumeric(t)})});const l=/^[a-zA-ZÀ-ÿ\s]{1,40}$/,c=/^\d{7,14}$/,u=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,d=document.querySelectorAll("#contactoForm input");null!=d&&d.forEach(t=>{t.addEventListener("keyup",t=>{m.validarFormulario(t)}),t.addEventListener("blur",t=>{m.validarFormulario(t)})});const m={showMenu:function(t){var e,a=document.querySelector(".btn-menu span");"fas fa-bars"==a.getAttribute("class")?(a.classList.remove("fas","fa-bars"),a.classList.add("fas","fa-times"),(e=document.querySelector(".menu-link")).classList.add("mostrarMenuMovil"),e.classList.remove("quitarMenuMovil")):(a.classList.remove("fas","fa-times"),a.classList.add("fas","fa-bars"),(e=document.querySelector(".menu-link")).classList.add("quitarMenuMovil"),e.classList.remove("mostrarMenuMovil"))},validarFormulario:function(t){switch(t.target.name){case"nombre":this.ruleinputs(l,t.target,t.target.name);break;case"telefono":this.ruleinputs(c,t.target,t.target.name);break;case"correo":this.ruleinputs(u,t.target,t.target.name);break;case"pais":case"estado":case"ciudad":case"asunto":case"mensaje":this.ruleinputs(l,t.target,t.target.name)}},ruleinputs:function(t,e,a){t.test(e.value)?document.getElementById(a).classList.remove("danger-input"):(document.getElementById(a).classList.add("danger-input"),document.getElementById(a).focus())},contactSubmit:async function(t,e){e.preventDefault();const a=document.getElementById("contactoForm"),n=new FormData(a),o={nombre:n.get("nombre"),telefono:n.get("telefono"),correo:n.get("correo"),asunto:n.get("asunto"),mensaje:n.get("mensaje")};if(null==o.nombre||0==o.nombre||/^\s+$/.test(o.nombre))return this.errorActive("nombre"),!1;if(null==o.telefono||0==o.telefono||/^\s+$/.test(o.telefono))return this.errorActive("telefono"),!1;if(!/\w+([-+.']\w+)*@\w+([-.]\w+)/.test(o.correo))return this.errorActive("correo"),!1;if(null==o.asunto||0==o.asunto||/^\s+$/.test(o.asunto))return this.errorActive("asunto"),!1;if(null==o.mensaje||0==o.mensaje||/^\s+$/.test(o.mensaje))return console.log(o.mensaje),this.errorActive("mensaje"),!1;try{const t=await fetch("controllers/EmailController.php",{method:"post",body:n});if(200==(await t.json()).status){Swal.fire("Mensaje enviado correctamente!","click en button!","success");const t=document.querySelectorAll(".iam-input");null!=t&&t.forEach(t=>{t.value=""})}}catch(e){console.log("fetch failed",e)}},errorActive:function(t){const e=document.getElementById(`${t}`),a=e.nextElementSibling;null!=a&&(a.classList.remove("oculto"),a.classList.add("mostrar"),e.focus())},removeError:function(t){const e=t.target.nextElementSibling;e.classList.contains("mostrar")&&(e.classList.remove("mostrar"),e.classList.add("oculto"))},justNumeric:function(t){}}}),$(".grid figure, .gridFooter figure").mouseover(function(){$(this).css({"background-position":"right bottom"})}),$(".grid figure, .gridFooter figure").mouseout(function(){$(this).css({"background-position":"left top"})}),$(".grid figure, .gridFooter figure").click(function(){var t=$(this).attr("vinculo");window.location=t});var totalPaginas=Number($(".pagination").attr("totalPaginas"));console.log(totalPaginas);var paginaActual=Number($(".pagination").attr("paginaActual")),rutaActual=$("#rutaActual").val(),rutaPagina=$(".pagination").attr("rutaPagina");0!=$(".pagination").length&&$(".pagination").twbsPagination({totalPages:totalPaginas,startPage:paginaActual,visiblePages:4,first:"Primero",last:"Último",prev:'<i class="fas fa-angle-left"></i>',next:'<i class="fas fa-angle-right"></i>'}).on("page",function(t,e){window.location=""!=rutaPagina?rutaActual+rutaPagina+"/"+e:rutaActual+e}),$(".deslizadorArticulos").jdSlider({wrap:".slide-inner",slideShow:3,slideToScroll:3,isLoop:!0,responsive:[{viewSize:320,settings:{slideShow:1,slideToScroll:1}}]}),$(".social-share").shapeShare(),$(".opiniones").html()&&1==document.querySelector(".opiniones").childNodes.length&&$(".opiniones").html('\n\n\t\t\t<p class="pl-3 text-secondary">¡Este artículo no tiene opiniones!</p>\n\n\t\t'),$("#fotoOpinion").change(function(){$(".alert").remove();var t=this.files[0];if("image/jpeg"!=t.type&&"image/png"!=t.type)return $("#fotoOpinion").val(""),void $("#fotoOpinion").after('\n\n\t\t\t\t<div class="aler alert-danger">¡La imagen debe estar en formato JPG o PNG!</div>\n    \t\t\n    \t');if(t.size>2e6)return $("#fotoOpinion").val(""),void $("#fotoOpinion").after('\n\n\t\t\t\t<div class="aler alert-danger">¡La imagen no debe pesar más de 2MB!</div>\n    \t\t\n    \t');var e=new FileReader;e.readAsDataURL(t),$(e).on("load",function(t){var e=t.target.result;$(".prevFotoOpinion").attr("src",e)})}),$(".buscador").change(function(){var t=$(this).val().toLowerCase();if(/^[a-z0-9ñÑáéíóú ]*$/.test(t)){var e=t.replace(/[0-9ñáéíóú ]/g,"_");$(".buscar").click(function(){""!=$(this).parent().parent().children(".buscador").val()&&(window.location=rutaActual+e)})}else $(".buscador").val("")}),$(document).on("keyup",".buscador",function(t){if(t.preventDefault(),13==t.keyCode&&""!=$(".buscador").val()){var e=$(this).val().toLowerCase();if(/^[a-z0-9ñÑáéíóú ]*$/.test(e)){var a=e.replace(/[0-9ñáéíóú ]/g,"_");window.location=rutaActual+a}else $(".buscador").val("")}});