window.addEventListener("DOMContentLoaded",t=>{let e=window.location,a=e.pathname.split("/")[1],o=e.protocol+"//"+e.host+"/"+a;const n=document.getElementById("btn-menu");null!=n&&n.addEventListener("click",t=>{d.showMenu(t)});const r=document.getElementById("submitContact");null!=r&&r.addEventListener("click",t=>{d.contactSubmit(o,t)});const i=document.querySelectorAll(".form-control");i&&i.forEach(t=>{t.addEventListener("keypress",t=>{d.removeError(t.target)})});const s=document.querySelectorAll(".justnumeric");null!=s&&s.forEach(t=>{t.addEventListener("keypress",t=>{d.justNumeric(t)})});const c=/^[a-zA-ZÀ-ÿ\s]{1,40}$/,l=/^\d{7,14}$/,u=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,d={showMenu:function(t){var e,a=document.querySelector(".btn-menu span");"fas fa-bars"==a.getAttribute("class")?(a.classList.remove("fas","fa-bars"),a.classList.add("fas","fa-times"),(e=document.querySelector(".menu-link")).classList.add("mostrarMenuMovil"),e.classList.remove("quitarMenuMovil")):(a.classList.remove("fas","fa-times"),a.classList.add("fas","fa-bars"),(e=document.querySelector(".menu-link")).classList.add("quitarMenuMovil"),e.classList.remove("mostrarMenuMovil"))},validarFormulario:function(t){switch(t.target.name){case"nombre":this.ruleinputs(c,t.target,t.target.name);break;case"telefono":this.ruleinputs(l,t.target,t.target.name);break;case"correo":this.ruleinputs(u,t.target,t.target.name);break;case"pais":case"estado":case"ciudad":case"asunto":case"mensaje":this.ruleinputs(c,t.target,t.target.name)}},ruleinputs:function(t,e,a){t.test(e.value)?document.getElementById(a).classList.remove("danger-input"):(document.getElementById(a).classList.add("danger-input"),document.getElementById(a).focus())},contactSubmit:async function(t,e){e.preventDefault();const a=document.getElementById("contactoForm"),o=new FormData(a),n=["asunto","mensaje","nombre","empresa","correo","telefono"],r=["empresa"],i={};for(const t of n){let e=o.get(t);i[t]=e?e.trim():""}const s=/^[\w.-]+@[a-zA-Z\d.-]+\.[a-zA-Z]{2,}$/,c=/^\d{10,15}$/;for(const[t,e]of Object.entries(i)){if(!r.includes(t)&&!e.length)return this.errorActive(t,"Este campo es obligatorio"),!1;if("correo"===t&&e.length&&!s.test(e))return this.errorActive("correo","Por favor, ingresa un correo válido"),!1;if("telefono"===t&&e.length&&!c.test(e))return this.errorActive("telefono","El teléfono debe tener entre 10 y 15 dígitos"),!1}try{const t=await fetch("controllers/EmailController.php",{method:"post",body:o});200==(await t.json()).status&&(Swal.fire({title:"Mensaje enviado correctamente!",text:"Click en el botón!",icon:"success",confirmButtonText:"OK",confirmButtonColor:"#3085d6"}),a.reset())}catch(e){console.log("fetch failed",e)}},errorActive:function(t,e){const a=document.getElementById(`${t}`),o=a.closest(".input-group").querySelector(".error-message");null!=o&&(o.textContent=e,o.style.display="block",a.focus())},removeError:function(t){const e=t.closest(".input-group").querySelector(".error-message");e&&(e.style.display="none")},justNumeric:function(t){}}}),$(".grid figure, .gridFooter figure").mouseover(function(){$(this).css({"background-position":"right bottom"})}),$(".grid figure, .gridFooter figure").mouseout(function(){$(this).css({"background-position":"left top"})}),$(".grid figure, .gridFooter figure").click(function(){var t=$(this).attr("vinculo");window.location=t});var totalPaginas=Number($(".pagination").attr("totalPaginas")),paginaActual=Number($(".pagination").attr("paginaActual")),rutaActual=$("#rutaActual").val(),rutaPagina=$(".pagination").attr("rutaPagina");0!=$(".pagination").length&&$(".pagination").twbsPagination({totalPages:totalPaginas,startPage:paginaActual,visiblePages:4,first:"Primero",last:"Último",prev:'<i class="fas fa-angle-left"></i>',next:'<i class="fas fa-angle-right"></i>'}).on("page",function(t,e){window.location=""!=rutaPagina?rutaActual+rutaPagina+"/"+e:rutaActual+e}),$(".deslizadorArticulos").jdSlider({wrap:".slide-inner",slideShow:3,slideToScroll:3,isLoop:!0,responsive:[{viewSize:320,settings:{slideShow:1,slideToScroll:1}}]}),$(".social-share").shapeShare(),$(".opiniones").html()&&1==document.querySelector(".opiniones").childNodes.length&&$(".opiniones").html('\n\n\t\t\t<p class="pl-3 text-secondary">¡Este artículo no tiene opiniones!</p>\n\n\t\t'),$("#fotoOpinion").change(function(){$(".alert").remove();var t=this.files[0];if("image/jpeg"!=t.type&&"image/png"!=t.type)return $("#fotoOpinion").val(""),void $("#fotoOpinion").after('\n\n\t\t\t\t<div class="aler alert-danger">¡La imagen debe estar en formato JPG o PNG!</div>\n    \t\t\n    \t');if(t.size>2e6)return $("#fotoOpinion").val(""),void $("#fotoOpinion").after('\n\n\t\t\t\t<div class="aler alert-danger">¡La imagen no debe pesar más de 2MB!</div>\n    \t\t\n    \t');var e=new FileReader;e.readAsDataURL(t),$(e).on("load",function(t){var e=t.target.result;$(".prevFotoOpinion").attr("src",e)})}),$(".buscador").change(function(){var t=$(this).val().toLowerCase();if(/^[a-z0-9ñÑáéíóú ]*$/.test(t)){var e=t.replace(/[0-9ñáéíóú ]/g,"_");$(".buscar").click(function(){""!=$(this).parent().parent().children(".buscador").val()&&(window.location=rutaActual+e)})}else $(".buscador").val("")}),$(document).on("keyup",".buscador",function(t){if(t.preventDefault(),13==t.keyCode&&""!=$(".buscador").val()){var e=$(this).val().toLowerCase();if(/^[a-z0-9ñÑáéíóú ]*$/.test(e)){var a=e.replace(/[0-9ñáéíóú ]/g,"_");window.location=rutaActual+a}else $(".buscador").val("")}});