window.addEventListener("DOMContentLoaded",e=>{let t=window.location,o=t.pathname.split("/")[1],n=t.protocol+"//"+t.host+"/"+o;const a=document.getElementById("btn-menu");var r=document.querySelector(".icon-amburger"),i=document.querySelector(".icon-close");r.style.display="block",i.style.display="none",null!=a&&a.addEventListener("click",e=>{m.showMenu(e)});const s=document.getElementById("submitContact");null!=s&&s.addEventListener("click",e=>{m.contactSubmit(n,e)});const l=document.querySelectorAll(".form-control");l&&l.forEach(e=>{e.addEventListener("keypress",e=>{m.removeError(e.target)})});const c=document.querySelectorAll(".justnumeric");null!=c&&c.forEach(e=>{e.addEventListener("keypress",e=>{m.justNumeric(e)})});const u=/^[a-zA-ZÀ-ÿ\s]{1,40}$/,d=/^\d{7,14}$/,g=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,m={showMenu:function(e){var t,o=document.querySelector(".icon-amburger"),n=document.querySelector(".icon-close");"none"!==o.style.display?(o.style.display="none",n.style.display="block",(t=document.querySelector(".menu-link")).classList.add("mostrarMenuMovil"),t.classList.remove("quitarMenuMovil")):(o.style.display="block",n.style.display="none",(t=document.querySelector(".menu-link")).classList.add("quitarMenuMovil"),t.classList.remove("mostrarMenuMovil"))},validarFormulario:function(e){switch(e.target.name){case"nombre":this.ruleinputs(u,e.target,e.target.name);break;case"telefono":this.ruleinputs(d,e.target,e.target.name);break;case"correo":this.ruleinputs(g,e.target,e.target.name);break;case"pais":case"estado":case"ciudad":case"asunto":case"mensaje":this.ruleinputs(u,e.target,e.target.name)}},ruleinputs:function(e,t,o){e.test(t.value)?document.getElementById(o).classList.remove("danger-input"):(document.getElementById(o).classList.add("danger-input"),document.getElementById(o).focus())},contactSubmit:async function(e,t){t.preventDefault();const o=document.getElementById("contactoForm"),n=new FormData(o),a=["asunto","mensaje","nombre","empresa","correo","telefono"],r=["empresa"],i={};for(const e of a){let t=n.get(e);i[e]=t?t.trim():""}const s=/^[\w.-]+@[a-zA-Z\d.-]+\.[a-zA-Z]{2,}$/,l=/^\d{10,15}$/;for(const[e,t]of Object.entries(i)){if(!r.includes(e)&&!t.length)return this.errorActive(e,"Este campo es obligatorio"),!1;if("correo"===e&&t.length&&!s.test(t))return this.errorActive("correo","Por favor, ingresa un correo válido"),!1;if("telefono"===e&&t.length&&!l.test(t))return this.errorActive("telefono","El teléfono debe tener entre 10 y 15 dígitos"),!1}try{const e=await fetch("controllers/EmailController.php",{method:"post",body:n});200==(await e.json()).status&&(Swal.fire({title:"Mensaje enviado correctamente!",text:"Click en el botón!",icon:"success",confirmButtonText:"OK",confirmButtonColor:"#3085d6"}),o.reset())}catch(t){console.log("fetch failed",t)}},errorActive:function(e,t){const o=document.getElementById(`${e}`),n=o.closest(".input-group").querySelector(".error-message");null!=n&&(n.textContent=t,n.style.display="block",o.focus())},removeError:function(e){const t=e.closest(".input-group").querySelector(".error-message");t&&(t.style.display="none")},justNumeric:function(e){}}}),$(".grid figure, .gridFooter figure").mouseover(function(){$(this).css({"background-position":"right bottom"})}),$(".grid figure, .gridFooter figure").mouseout(function(){$(this).css({"background-position":"left top"})}),$(".grid figure, .gridFooter figure").click(function(){var e=$(this).attr("vinculo");window.location=e});var totalPaginas=Number($(".pagination").attr("totalPaginas")),paginaActual=Number($(".pagination").attr("paginaActual")),rutaActual=$("#rutaActual").val(),rutaPagina=$(".pagination").attr("rutaPagina");0!=$(".pagination").length&&$(".pagination").twbsPagination({totalPages:totalPaginas,startPage:paginaActual,visiblePages:4,first:"Primero",last:"Último",prev:'<i class="fas fa-angle-left"></i>',next:'<i class="fas fa-angle-right"></i>'}).on("page",function(e,t){window.location=""!=rutaPagina?rutaActual+rutaPagina+"/"+t:rutaActual+t}),$(".deslizadorArticulos").jdSlider({wrap:".slide-inner",slideShow:3,slideToScroll:3,isLoop:!0,responsive:[{viewSize:320,settings:{slideShow:1,slideToScroll:1}}]}),$(".social-share").shapeShare(),$(".opiniones").html()&&1==document.querySelector(".opiniones").childNodes.length&&$(".opiniones").html('\n\n\t\t\t<p class="pl-3 text-secondary">¡Este artículo no tiene opiniones!</p>\n\n\t\t'),$("#fotoOpinion").change(function(){$(".alert").remove();var e=this.files[0];if("image/jpeg"!=e.type&&"image/png"!=e.type)return $("#fotoOpinion").val(""),void $("#fotoOpinion").after('\n\n\t\t\t\t<div class="aler alert-danger">¡La imagen debe estar en formato JPG o PNG!</div>\n    \t\t\n    \t');if(e.size>2e6)return $("#fotoOpinion").val(""),void $("#fotoOpinion").after('\n\n\t\t\t\t<div class="aler alert-danger">¡La imagen no debe pesar más de 2MB!</div>\n    \t\t\n    \t');var t=new FileReader;t.readAsDataURL(e),$(t).on("load",function(e){var t=e.target.result;$(".prevFotoOpinion").attr("src",t)})}),$(".buscador").change(function(){var e=$(this).val().toLowerCase();if(/^[a-z0-9ñÑáéíóú ]*$/.test(e)){var t=e.replace(/[0-9ñáéíóú ]/g,"_");$(".buscar").click(function(){""!=$(this).parent().parent().children(".buscador").val()&&(window.location=rutaActual+t)})}else $(".buscador").val("")}),$(document).on("keyup",".buscador",function(e){if(e.preventDefault(),13==e.keyCode&&""!=$(".buscador").val()){var t=$(this).val().toLowerCase();if(/^[a-z0-9ñÑáéíóú ]*$/.test(t)){var o=t.replace(/[0-9ñáéíóú ]/g,"_");window.location=rutaActual+o}else $(".buscador").val("")}});